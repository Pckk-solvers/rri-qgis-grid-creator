# RRI用格子生成ツールの設計概要

## 目的
- QGISとPythonを用いて、RRIモデル用の計算格子を自動生成する。
- GUIまたはCLIでの操作をサポートし、非エンジニアでも扱える設計とする。

## 入出力仕様 
- 入力：
  - 点群地形データ（.csv）
  - 流域ポリゴン（.shp）
  - 計算領域ポリゴン（.shp）
- 出力：
  - 【必須】窪地処理された標高データ（.asc）、流向データ（.asc）
  - 【確認】窪地処理前の標高データ（.asc）、ポリゴンメッシュ形状の計算領域データ（.shp）（標高値あり）

## 処理フロー（概要）
1. 計算領域のメッシュを作成
2. 計算領域に標高値属性を付与 → **確認用中間出力**
3. ベクタをラスタ化する。（asc変換）→ **確認用中間出力**
4. 窪地処理（.sdat） 
5. 流向処理（.sdat）
6. 「4、5 の出力ファイル」ラスタ形式の変換（.sdat → .asc） → **必須出力**

## 開発ステップ
1. 設計ドキュメントの整備
2. 窪地処理、流向処理、ラスタ形式の変換を実装する。
3. バッチファイルを用いて、CLI経由でプラグイン処理を実装する。
4. 処理のモジュール分割とロギング整備
5. GUIランチャー優先でエントリポイント作成
6. GUIランチャーを起動するためのバッチファイル作成
7. 必要に応じて、公開用ドキュメントの整備

## 開発スケジュール（目標日・作業時間）
| フェーズ | 作業内容                                            | 目標日       | 見積作業時間 | 
|----------|-----------------------------------------------------|--------------|----------------|
| Step 1   | 設計ドキュメントの整備                              | 2025/08/04（月）   | 4.0h           |
| Step 2   | 窪地処理、流向処理、ラスタ形式の変換の実装         | 2025/08/05（火）   | 7.0h           |
| Step 3   | バッチファイルでCLI経由実行（QGIS処理との接続）    | 2025/08/06（水）   | 3.5h           |
| Step 4   | 処理モジュールの分割・ロギングの導入                | 2025/08/07（木）   | 4.5h           |
| Step 5   | GUIランチャーのエントリポイント作成                 | 2025/08/08（金）   | 5.5h           |
| Step 6   | GUIランチャー起動用バッチファイルの作成             | 2025/08/12（火）   | 2.0h           |
| （Step 7）   | 公開用ドキュメント（README, Usage例等）の整備       | 2025/08/14（木）  | 3.0h           |
| | | |計：26.5h(+ 3.0h)|


## 今後の拡張
- 標高の統計値自動取得
- 代表土地利用の割当
- 複数流域対応

## Actionでリリースを自動化